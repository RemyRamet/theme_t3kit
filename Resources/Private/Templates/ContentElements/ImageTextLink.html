<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">

<f:layout name="Default" />
<f:section name="Header" />
<f:section name="Main">
<!-- theme_t3kit: Templates/ContentElements/ImageTextLink.html [begin] -->
	<f:comment>
		<!--
			Use a variable to set anchor class.
			Leave empty if both disableWholeAreaLink and btnAsLink aren't set
			Don't want classes btn btn-default when link is on "whole area"
		-->
	</f:comment>
	<f:variable name="anchorClass">{f:if(condition: '{settings.disableWholeAreaLink} == 1 && {settings.btnAsLink} != 1' , then: ' btn btn-default', else: '')}</f:variable>

	<div class="img-text-link__wrp">
		<div class="img-text-link {f:if(condition: settings.disableWholeAreaLink, then: '', else: '_whole-area-link')} {f:if(condition: '{settings.hoverEffect} == 0', then: '', else: '_hover-{settings.hoverEffect}')}">
			<f:if condition="{image}">
				<f:then>
					<f:for each="{image}" as="mediaItem" iteration="imageIteration">
						<f:if condition="{imageIteration.isFirst}">
							<f:render section="imageType" arguments="{_all}" />
						</f:if>
					</f:for>
				</f:then>

				<f:else>
					<f:if condition="{assets}">
						<f:for each="{assets}" as="mediaItem" iteration="mediaIteration">
							<f:if condition="{mediaIteration.isFirst}">
								<f:render section="media" arguments="{_all}" />
							</f:if>
						</f:for>
					</f:if>
				</f:else>
			</f:if>
			<f:if condition="{data.header}">
				<f:render partial="Header/Header" arguments="{
					header: '{data.header}',
					layout: '{data.header_layout}',
					positionClass: 'img-text-link__header',
					link: '',
					uid: '{data.uid}',
					default: 3
					}" />
			</f:if>
			<f:if condition="{data.bodytext}">
				<f:if condition="{settings.hoverEffect}">
					<f:then>
						<f:comment><!-- can't allow frontend-editing since js crops the text --></f:comment>
						<p class="img-text-link__p js__img-text-link">{data.bodytext}</p>
					</f:then>
					<f:else>
						<p class="img-text-link__p"><core:contentEditable table="tt_content" field="bodytext" uid="{data.uid}">{data.bodytext}</core:contentEditable></p>
					</f:else>
				</f:if>
			</f:if>
			<f:if condition="{data.header_link}">
				<f:if condition="{data.subheader}">
					<f:then>
						<f:link.typolink parameter="{data.header_link}" title="{data.subheader}" class="img-text-link__link{anchorClass}"> {data.subheader}</f:link.typolink>
					</f:then>
					<f:else>
				 		<f:link.typolink parameter="{data.header_link}" title="{data.header}" class="img-text-link__link{anchorClass}"> {data.header}</f:link.typolink>
					</f:else>
				</f:if>
			</f:if>
			<f:if condition="{settings.disableWholeAreaLink} == 0">
				<f:if condition="{settings.hoverEffect} == 0">
					<f:if condition="{data.subheader}">
						<span class="img-text-link__sham-link {f:if(condition: settings.linkAsBtn, then: 'btn btn-default', else: '')}" aria-hidden="true">{data.subheader}</span>
					</f:if>
				</f:if>
	 		</f:if>
		</div>
	</div>
<!-- theme_t3kit: Templates/ContentElements/ImageTextLink.html [end] -->
</f:section>

<f:section name="imageType">
	<f:if condition="{mediaItem.link}">
		<f:then>
			<f:link.typolink title="{mediaItem.title}" class="img-text-link__img-link" parameter="{mediaItem.link}">
				<f:render section="media" arguments="{_all}" />
			</f:link.typolink>
		</f:then>

		<f:else>
			<f:render section="media" arguments="{_all}" />
		</f:else>

	</f:if>
</f:section>

<f:section name="media">
	<f:media
		file="{mediaItem}"
		width="{data.imagewidth}"
		height="{data.imageheight}"
		alt="{mediaItem.alternative}"
		title="{mediaItem.title}"
		class="img-text-link__img img-responsive"
	/>
</f:section>

</html>
